import React, { useState, useEffect } from 'react';
import { 
  Heart, 
  ShoppingBag, 
  Utensils, 
  Plane, 
  Menu, 
  X, 
  ChevronRight, 
  Star, 
  CreditCard, 
  Search, 
  Eye, 
  CheckCircle,
  Accessibility,
  Phone,
  Shield,
  Key
} from 'lucide-react';

// --- Components ---

const ElderKeyLogo = ({ className = "w-10 h-10" }) => (
  <svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg" className={className}>
    {/* Layer 1: The Base (Security/Foundation) - Flat Amber */}
    <rect x="20" y="20" width="60" height="60" rx="18" className="fill-amber-200" />
    
    {/* Layer 2: The Modern Accent - Flat Orange Offset */}
    <rect x="35" y="10" width="40" height="40" rx="20" className="fill-orange-500/20" />
    
    {/* Layer 3: The Key Element - Vibrant Orange */}
    <path 
      d="M65 40C65 48.2843 58.2843 55 50 55C48.6 55 47.3 54.8 46 54.5V75C46 76.6569 44.6569 78 43 78H35C33.3431 78 32 76.6569 32 75V64.5C30.8 63.8 29.7 62.9 28.8 61.8C25.2 57.3 23.8 51.5 25.1 45.9C26.9 38.2 33.8 32.5 41.9 32.5C42.3 32.5 42.7 32.5 43.1 32.5C43.8 29.5 46.5 27.3 49.7 27.3C53.7 27.3 57 30.6 57 34.6C57 35.8 56.7 37 56.1 38C61.2 38.6 65 40 65 40Z" 
      className="fill-orange-600" 
    />
    
    {/* Layer 4: The 'Eye' of the Key - White */}
    <circle cx="50" cy="45" r="6" className="fill-white" />
  </svg>
);

const Button = ({ children, variant = 'primary', className = '', onClick, disabled }) => {
  const baseStyle = "px-6 py-3 rounded-2xl font-bold tracking-wide transition-all duration-300 transform hover:scale-105 active:scale-95 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed";
  const variants = {
    primary: "bg-gradient-to-tr from-amber-500 to-orange-600 text-white shadow-lg shadow-orange-500/30 hover:shadow-orange-500/50",
    secondary: "bg-white/80 backdrop-blur-md text-amber-900 border border-white/50 hover:bg-white hover:border-amber-200",
    outline: "border-2 border-amber-600 text-amber-700 hover:bg-amber-50",
    ghost: "bg-transparent text-amber-800 hover:bg-amber-100"
  };

  return (
    <button onClick={onClick} disabled={disabled} className={`${baseStyle} ${variants[variant]} ${className}`}>
      {children}
    </button>
  );
};

const GlassCard = ({ children, className = '', delay = 0 }) => (
  <div 
    className={`bg-white/60 backdrop-blur-xl border border-white/60 shadow-xl shadow-amber-900/5 rounded-[2rem] p-6 transition-all duration-500 hover:bg-white/80 hover:scale-[1.02] hover:shadow-amber-500/10 ${className}`}
    style={{ animationDelay: `${delay}ms` }}
  >
    {children}
  </div>
);

const Badge = ({ children, color = 'amber' }) => {
  const colors = {
    amber: 'bg-amber-100 text-amber-800 border border-amber-200',
    green: 'bg-emerald-100 text-emerald-800 border border-emerald-200',
    orange: 'bg-orange-100 text-orange-800 border border-orange-200',
    rose: 'bg-rose-100 text-rose-800 border border-rose-200',
  };
  return (
    <span className={`px-3 py-1 rounded-xl text-xs font-bold uppercase tracking-wide ${colors[color]}`}>
      {children}
    </span>
  );
};

// --- Main Application ---

export default function App() {
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const [activeTab, setActiveTab] = useState('All');
  const [highContrast, setHighContrast] = useState(false);
  const [scrolled, setScrolled] = useState(false);

  // Handle scroll for navbar styling
  useEffect(() => {
    const handleScroll = () => setScrolled(window.scrollY > 50);
    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  const categories = [
    { id: 'All', icon: Star, label: 'All Perks' },
    { id: 'Health', icon: Heart, label: 'Health & Meds' },
    { id: 'Dining', icon: Utensils, label: 'Dining' },
    { id: 'Shopping', icon: ShoppingBag, label: 'Retail' },
    { id: 'Travel', icon: Plane, label: 'Travel' },
  ];

  const perks = [
    { id: 1, title: 'Mercury Drug', discount: '20% OFF', category: 'Health', desc: 'On all prescription medicines.', logo: 'ðŸ’Š' },
    { id: 2, title: 'Starbucks', discount: 'Free Upgrade', category: 'Dining', desc: 'Free size upgrade on Tuesdays.', logo: 'â˜•' },
    { id: 3, title: 'SM Supermalls', discount: 'Priority Lane', category: 'Shopping', desc: 'VIP access to checkout counters.', logo: 'ðŸ›ï¸' },
    { id: 4, title: 'Philippine Airlines', discount: '20% OFF', category: 'Travel', desc: 'Domestic flights for cardholders.', logo: 'âœˆï¸' },
    { id: 5, title: 'Watson\'s', discount: '5% OFF', category: 'Health', desc: 'Additional discount on wellness items.', logo: 'ðŸ¥' },
    { id: 6, title: 'Jollibee', discount: 'Free Drink', category: 'Dining', desc: 'With any value meal purchase.', logo: 'ðŸ”' },
  ];

  const filteredPerks = activeTab === 'All' ? perks : perks.filter(p => p.category === activeTab);

  return (
    <div className={`min-h-screen font-sans selection:bg-amber-200 transition-colors duration-300 ${highContrast ? 'grayscale contrast-125 bg-white' : 'bg-stone-50'}`}>
      
      {/* Dynamic Background (Hidden in high contrast) */}
      {!highContrast && (
        <div className="fixed inset-0 -z-10 overflow-hidden">
          {/* Main sunny background */}
          <div className="absolute top-0 left-0 w-full h-full bg-gradient-to-br from-amber-50 via-orange-50 to-stone-100"></div>
          
          {/* Moving Blobs */}
          <div className="absolute top-[-10%] right-[-5%] w-96 h-96 bg-yellow-300/30 rounded-full blur-3xl animate-pulse"></div>
          <div className="absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] bg-orange-300/20 rounded-full blur-3xl animate-pulse" style={{ animationDuration: '6s' }}></div>
          <div className="absolute top-[40%] right-[30%] w-72 h-72 bg-amber-400/10 rounded-full blur-3xl animate-bounce" style={{ animationDuration: '10s' }}></div>
        </div>
      )}

      {/* Navigation */}
      <nav className={`fixed w-full z-50 transition-all duration-300 ${scrolled ? 'bg-white/90 backdrop-blur-lg shadow-sm py-3' : 'bg-transparent py-5'}`}>
        <div className="container mx-auto px-6 flex justify-between items-center">
          <div className="flex items-center gap-3">
            <ElderKeyLogo className="w-12 h-12" />
            <span className={`text-2xl font-bold tracking-tight ${highContrast ? 'text-black' : 'text-stone-800'}`}>
              Elder<span className="text-orange-600">Key</span>
            </span>
          </div>

          <div className="hidden md:flex items-center gap-8">
            <a href="#perks" className="text-stone-600 hover:text-orange-600 font-medium transition-colors">Perks Directory</a>
            <a href="#how-it-works" className="text-stone-600 hover:text-orange-600 font-medium transition-colors">How it Works</a>
            <a href="#support" className="text-stone-600 hover:text-orange-600 font-medium transition-colors">Support</a>
          </div>

          <div className="hidden md:flex items-center gap-4">
            <button 
              onClick={() => setHighContrast(!highContrast)}
              className="p-2 rounded-full hover:bg-stone-100 text-stone-600 transition-colors"
              title="Toggle Accessibility Mode"
            >
              <Accessibility size={20} />
            </button>
            <Button variant="primary" className="py-2 px-6 text-sm">
              Member Login
            </Button>
          </div>

          <button onClick={() => setIsMenuOpen(!isMenuOpen)} className="md:hidden text-stone-700">
            {isMenuOpen ? <X size={28} /> : <Menu size={28} />}
          </button>
        </div>
      </nav>

      {/* Mobile Menu */}
      {isMenuOpen && (
        <div className="fixed inset-0 z-40 bg-white/95 backdrop-blur-xl flex flex-col items-center justify-center space-y-8 animate-fade-in md:hidden">
          <a href="#perks" onClick={() => setIsMenuOpen(false)} className="text-2xl font-medium text-stone-800">Perks</a>
          <a href="#how-it-works" onClick={() => setIsMenuOpen(false)} className="text-2xl font-medium text-stone-800">How it Works</a>
          <a href="#support" onClick={() => setIsMenuOpen(false)} className="text-2xl font-medium text-stone-800">Support</a>
          <Button onClick={() => setIsMenuOpen(false)}>Member Login</Button>
        </div>
      )}

      {/* Hero Section */}
      <section className="relative pt-36 pb-20 px-6 overflow-hidden">
        <div className="container mx-auto flex flex-col lg:flex-row items-center gap-16">
          
          <div className="lg:w-1/2 space-y-8 z-10">
            <div className="inline-flex items-center gap-2 px-4 py-2 bg-amber-100/80 backdrop-blur-sm border border-amber-200 rounded-full text-amber-800 text-sm font-bold shadow-sm">
              <Key size={16} className="text-orange-600" />
              <span>Unlock Your Golden Benefits</span>
            </div>
            
            <h1 className={`text-5xl lg:text-7xl font-extrabold leading-tight ${highContrast ? 'text-black' : 'text-stone-800'}`}>
              The Golden Years, <br/>
              <span className="text-transparent bg-clip-text bg-gradient-to-r from-amber-500 to-orange-600 drop-shadow-sm">
                Unlocked.
              </span>
            </h1>
            
            <p className={`text-xl ${highContrast ? 'text-black' : 'text-stone-600'} leading-relaxed max-w-lg`}>
              ElderKey is your digital passport to thousands of exclusive discounts, priority lanes, and wellness benefits.
            </p>
            
            <div className="flex flex-col sm:flex-row gap-4">
              <Button>
                Get Digital Key
                <ChevronRight size={18} />
              </Button>
              <Button variant="secondary">
                Explore Partners
              </Button>
            </div>

            <div className="flex items-center gap-4 text-sm text-stone-500 font-medium">
              <div className="flex -space-x-3">
                {[1,2,3,4].map(i => (
                  <div key={i} className="w-10 h-10 rounded-full border-2 border-white bg-stone-200 flex items-center justify-center text-xs overflow-hidden">
                    <img src={`https://api.dicebear.com/7.x/avataaars/svg?seed=${i+25}&backgroundColor=ffdfbf`} alt="user" />
                  </div>
                ))}
              </div>
              <p>Trusted by 2M+ Elders</p>
            </div>
          </div>

          {/* 3D Card Visual */}
          <div className="lg:w-1/2 flex justify-center perspective-1000 z-10">
            <div className="relative group cursor-pointer w-[380px] h-[240px] transition-transform duration-700 transform hover:rotate-y-12 hover:rotate-x-6 preserve-3d">
              
              {/* Card Glow */}
              <div className="absolute -inset-4 bg-gradient-to-tr from-amber-400 to-orange-600 rounded-3xl opacity-40 blur-2xl group-hover:opacity-60 transition-opacity"></div>
              
              {/* Card Body - Gold Metallic Look */}
              <div className="relative w-full h-full bg-gradient-to-br from-amber-100 via-orange-100 to-amber-300 backdrop-blur-md border border-white/60 rounded-3xl shadow-2xl p-6 flex flex-col justify-between overflow-hidden">
                
                {/* Metallic Sheen Effect */}
                <div className="absolute top-0 right-0 w-64 h-64 bg-gradient-to-bl from-white/60 to-transparent rounded-full blur-2xl pointer-events-none mix-blend-overlay"></div>
                <div className="absolute bottom-0 left-0 w-full h-1/2 bg-gradient-to-t from-orange-400/20 to-transparent pointer-events-none"></div>

                {/* Card Top */}
                <div className="flex justify-between items-start z-10">
                  <div className="flex items-center gap-2">
                    <ElderKeyLogo className="w-8 h-8" />
                    <div>
                      <h3 className="text-amber-900 font-bold text-lg tracking-wider drop-shadow-sm leading-none">ElderKey</h3>
                      <p className="text-amber-800 text-[10px] uppercase tracking-widest mt-1 font-semibold">Priority Access</p>
                    </div>
                  </div>
                  <div className="w-10 h-10 rounded-xl bg-white/40 backdrop-blur border border-white/50 flex items-center justify-center shadow-inner">
                    <div className="w-6 h-6 rounded-full bg-gradient-to-br from-yellow-400 to-orange-500 shadow-sm"></div>
                  </div>
                </div>

                {/* Card Chip */}
                <div className="w-12 h-9 rounded-lg bg-gradient-to-br from-yellow-200 to-yellow-400 border border-yellow-500/50 shadow-inner flex items-center justify-center z-10 mt-2">
                   <div className="w-8 h-5 border border-yellow-700/20 rounded-md"></div>
                </div>

                {/* Card Bottom */}
                <div className="space-y-4 z-10">
                  <div className="text-amber-950 text-2xl font-mono tracking-widest drop-shadow-sm font-medium">
                    â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ 1293
                  </div>
                  <div className="flex justify-between items-end">
                    <div>
                      <p className="text-amber-800 text-[10px] uppercase font-bold">Key Holder</p>
                      <p className="text-amber-950 font-bold text-sm">MARIA DELA CRUZ</p>
                    </div>
                    <div className="text-right">
                       <p className="text-amber-800 text-[10px] uppercase font-bold">Expires</p>
                       <p className="text-amber-950 font-bold text-sm">12/28</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Perks Filter Section */}
      <section id="perks" className="py-20 px-6">
        <div className="container mx-auto">
          <div className="text-center mb-16">
            <h2 className={`text-4xl font-bold mb-4 ${highContrast ? 'text-black' : 'text-stone-800'}`}>Exclusive Perks</h2>
            <p className="text-stone-600 max-w-2xl mx-auto">Browse through our growing list of partner establishments offering discounts and priority services.</p>
          </div>

          {/* Categories */}
          <div className="flex flex-wrap justify-center gap-4 mb-12">
            {categories.map((cat) => (
              <button
                key={cat.id}
                onClick={() => setActiveTab(cat.id)}
                className={`flex items-center gap-2 px-6 py-3 rounded-2xl transition-all duration-300 ${
                  activeTab === cat.id 
                    ? 'bg-gradient-to-r from-amber-500 to-orange-500 text-white shadow-lg scale-105' 
                    : 'bg-white text-stone-600 hover:bg-amber-50 border border-transparent hover:border-amber-200'
                }`}
              >
                <cat.icon size={18} />
                <span className="font-medium">{cat.label}</span>
              </button>
            ))}
          </div>

          {/* Cards Grid */}
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            {filteredPerks.map((perk, idx) => (
              <GlassCard key={perk.id} delay={idx * 100} className="group cursor-pointer">
                <div className="flex justify-between items-start mb-6">
                  <div className="w-14 h-14 bg-gradient-to-br from-white to-amber-50 rounded-2xl flex items-center justify-center text-3xl shadow-sm border border-white text-amber-900">
                    {perk.logo}
                  </div>
                  <Badge color={perk.category === 'Health' ? 'green' : perk.category === 'Dining' ? 'orange' : 'amber'}>
                    {perk.category}
                  </Badge>
                </div>
                <h3 className="text-xl font-bold text-stone-800 mb-1 group-hover:text-orange-600 transition-colors">
                  {perk.title}
                </h3>
                <div className="text-2xl font-black text-orange-600 mb-3">{perk.discount}</div>
                <p className="text-stone-500 text-sm leading-relaxed mb-6">
                  {perk.desc}
                </p>
                <div className="w-full h-px bg-stone-200 mb-4"></div>
                <button className="flex items-center text-sm font-semibold text-stone-600 group-hover:text-orange-600 transition-colors">
                  View Details <ChevronRight size={16} className="ml-1" />
                </button>
              </GlassCard>
            ))}
          </div>

          {/* Search Bar / Call to Action */}
          <div className="mt-16 max-w-2xl mx-auto">
            <div className="relative group">
              <input 
                type="text" 
                placeholder="Search for a specific store..." 
                className="w-full py-4 pl-12 pr-4 rounded-2xl bg-white/80 border border-stone-200 shadow-sm focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500 transition-all text-stone-700 placeholder:text-stone-400 backdrop-blur-sm"
              />
              <Search className="absolute left-4 top-1/2 transform -translate-y-1/2 text-stone-400 group-focus-within:text-amber-500 transition-colors" size={20} />
            </div>
          </div>
        </div>
      </section>

      {/* How It Works */}
      <section id="how-it-works" className={`py-20 px-6 ${highContrast ? 'bg-stone-100' : 'bg-white/30'}`}>
        <div className="container mx-auto">
          <div className="flex flex-col lg:flex-row items-center gap-16">
            <div className="lg:w-1/2">
               <h2 className="text-4xl font-bold text-stone-800 mb-6">Simple. Secure. Smart.</h2>
               <p className="text-stone-600 text-lg mb-8 leading-relaxed">
                 We've designed the app to be as easy as possible. No complicated passwords or confusing menus. Just your Key, ready when you need it.
               </p>
               
               <div className="space-y-8">
                 {[
                   { icon: Phone, title: "1. Download & Register", text: "Download the ElderKey app and snap a photo of your existing ID." },
                   { icon: Shield, title: "2. Verify Identity", text: "Our secure system verifies your details in seconds." },
                   { icon: Key, title: "3. Scan & Save", text: "Show your Digital Key QR code at any partner store." }
                 ].map((step, idx) => (
                   <div key={idx} className="flex gap-4 group">
                     <div className="flex-shrink-0 w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center text-orange-600 group-hover:scale-110 transition-transform duration-300">
                       <step.icon size={24} />
                     </div>
                     <div>
                       <h4 className="text-lg font-bold text-stone-800">{step.title}</h4>
                       <p className="text-stone-500 mt-1">{step.text}</p>
                     </div>
                   </div>
                 ))}
               </div>
            </div>
            
            <div className="lg:w-1/2">
               <GlassCard className="max-w-md mx-auto relative overflow-hidden bg-gradient-to-br from-orange-500 to-amber-600 !border-0 text-white p-8">
                  <div className="absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"></div>
                  
                  <div className="text-center space-y-6 relative z-10">
                    <div className="w-16 h-16 bg-white/20 backdrop-blur-md rounded-2xl mx-auto flex items-center justify-center mb-4">
                      <ElderKeyLogo className="w-10 h-10 text-white" />
                    </div>
                    <h3 className="text-2xl font-bold">Ready to unlock?</h3>
                    <p className="text-amber-100">Get your lifetime ElderKey membership today. It's free for all citizens 60 and above.</p>
                    <button className="w-full bg-white text-orange-700 font-bold py-4 rounded-xl shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all">
                      Create Account
                    </button>
                    <p className="text-xs text-amber-200">Need help? Call our hotline at 1-800-ELDERKEY</p>
                  </div>
               </GlassCard>
            </div>
          </div>
        </div>
      </section>

      {/* Footer */}
      <footer className="bg-white py-12 border-t border-stone-200">
        <div className="container mx-auto px-6">
          <div className="grid grid-cols-1 md:grid-cols-4 gap-8 mb-8">
            <div className="col-span-1 md:col-span-2">
              <div className="flex items-center gap-2 mb-4">
                <ElderKeyLogo className="w-8 h-8" />
                <span className="text-lg font-bold text-stone-800">ElderKey</span>
              </div>
              <p className="text-stone-500 max-w-sm">Empowering the elderly with digital convenience. A private initiative in partnership with the National Commission of Senior Citizens.</p>
            </div>
            <div>
              <h4 className="font-bold text-stone-800 mb-4">Quick Links</h4>
              <ul className="space-y-2 text-sm text-stone-500">
                <li><a href="#" className="hover:text-orange-600 transition-colors">About Us</a></li>
                <li><a href="#" className="hover:text-orange-600 transition-colors">Partner with Us</a></li>
                <li><a href="#" className="hover:text-orange-600 transition-colors">Privacy Policy</a></li>
                <li><a href="#" className="hover:text-orange-600 transition-colors">Terms of Service</a></li>
              </ul>
            </div>
            <div>
              <h4 className="font-bold text-stone-800 mb-4">Contact</h4>
              <ul className="space-y-2 text-sm text-stone-500">
                <li>help@elderkey.ph</li>
                <li>+63 2 8888 1234</li>
                <li>Makati City, Philippines</li>
              </ul>
            </div>
          </div>
          <div className="text-center pt-8 border-t border-stone-100 text-stone-400 text-sm">
            &copy; 2024 ElderKey Digital ID. All rights reserved.
          </div>
        </div>
      </footer>
    </div>
  );
}
